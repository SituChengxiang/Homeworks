# MATLAB 基本语法与常用函数速查表

## 一、基础语法

| 功能 | 语法 | 示例 |
|------|------|------|
| **变量赋值** | `变量名 = 表达式` | `x = 3.14;` |
| **续行** | 用 `...` | `y = sin(x) + ...<br>    cos(x);` |
| **注释** | `%` 或 `Ctrl+R` | `% 计算圆周率近似值` |
| **清空工作区** | `clear` | `clear all` |
| **清屏** | `clc` | `clc` |
| **帮助** | `help 函数名` 或 `doc 函数名` | `help plot` |

> ⚠️ 变量名区分大小写，不能以数字开头，如 `x1` 合法，`1x` 非法。

---

## 二、向量与矩阵

### 1. 创建

```matlab
% 行向量
v = [1, 2, 3];          % 或 v = [1 2 3];
% 列向量
w = [1; 2; 3];
% 等距向量
x = 0:0.1:1;            % 从0到1，步长0.1
x = linspace(0, 1, 11); % 生成11个等间距点

% 矩阵
A = [1 2; 3 4];         % 2×2矩阵
B = zeros(3);           % 3×3零矩阵
C = ones(2,3);          % 2×3全1矩阵
D = eye(4);             % 4×4单位矩阵
E = rand(2);            % 2×2随机矩阵（0~1均匀分布）
```

### 2. 索引与切片

```matlab
A = [1 2 3; 4 5 6; 7 8 9];
a11 = A(1,1);           % =1
first_row = A(1,:);     % = [1 2 3]
last_col = A(:,end);    % = [3;6;9]
A(2,3) = 10;            % 修改元素
```

### 3. 运算

| 运算 | 含义 | 示例 |
|------|------|------|
| `+ - * / ^` | 矩阵运算 | `A*B`, `A^2` |
| `.* ./ .^` | **元素级**运算 | `A.*B`, `x.^2` |
| `'` | 共轭转置 | `A'` |
| `.'` | 纯转置（非共轭） | `A.'` |
| `inv(A)` | 矩阵求逆 | `x = inv(A)*b` |
| `A\b` | **推荐**：解 Ax = b | `x = A\b` |

> ✅ 优先使用 `A\b` 而非 `inv(A)*b`（更高效、更稳定）

---

## 三、流程控制

### 1. `if` 语句

```matlab
if x > 0
    y = log(x);
elseif x == 0
    y = 0;
else
    y = NaN;
end
```

### 2. `for` 循环

```matlab
for k = 1:5
    fprintf('k = %d\n', k);
end

% 遍历向量
v = [10 20 30];
for i = 1:length(v)
    disp(v(i));
end
```

### 3. `while` 循环

```matlab
tol = 1e-6;
err = 1;
while err > tol
    % 迭代计算
    err = abs(new_val - old_val);
end
```

---

## 四、函数与脚本

### 1. 函数文件（保存为 `myfunc.m`）

```matlab
function y = myfunc(x)
% MYFUNC 计算 x 的平方加 1
% 输入：x（标量或数组）
% 输出：y = x^2 + 1

y = x.^2 + 1;  % 注意用 .^ 元素级运算
end
```

> 📌 函数文件名必须与函数名一致。

### 2. 脚本文件（`.m` 文件，无输入输出）

```matlab
% plot_sine.m
x = 0:0.01:2*pi;
y = sin(x);
plot(x, y);
title('y = sin(x)');
```

---

## 五、常用数学函数

| 函数 | 说明 | 示例 |
|------|------|------|
| `sin`, `cos`, `tan` | 三角函数 | `sin(pi/2)` |
| `exp(x)`, `log(x)` | 指数、自然对数 | `exp(1) ≈ 2.718` |
| `sqrt(x)` | 平方根 | `sqrt(4) = 2` |
| `abs(x)` | 绝对值/模 | `abs(-3) = 3`, `abs(3+4i) = 5` |
| `round`, `floor`, `ceil` | 取整 | `floor(3.7) = 3` |
| `max`, `min` | 最大/最小值 | `[m, idx] = max(v)` |
| `sum`, `prod` | 求和、连乘 | `sum([1 2 3]) = 6` |
| `norm(v)` | 向量范数 | `norm(v,2)` (默认) |

---

## 六、多项式与插值

| 功能 | 函数 | 示例 |
|------|------|------|
| 多项式表示 | 系数向量（降幂） | `p = [1 0 -2];` 表示 $x^2 - 2$ |
| 求值 | `polyval(p, x)` | `polyval([1 0 -2], 2)` → $2^2 - 2 = 2$ |
| 求根 | `roots(p)` | `roots([1 0 -4])` → `[-2; 2]` |
| 由根构造多项式 | `poly(r)` | `poly([1 2])` → `[1 -3 2]`（即 $(x-1)(x-2)$） |
| 多项式乘法 | `conv(a, b)` | `conv([1 1], [1 -1])` → `[1 0 -1]` |
| 一维插值 | `interp1(x, y, xi, 'method')` | `yi = interp1(x, y, 0.5, 'spline');` |

> ✅ `interp1` 的 `method` 可选：`'linear'`（默认）、`'spline'`、`'pchip'`、`'nearest'`

---

## 七、绘图基础

```matlab
x = 0:0.1:10;
y1 = sin(x);
y2 = cos(x);

% 基本绘图
plot(x, y1, 'r-', x, y2, 'b--');  % 红实线、蓝虚线
xlabel('x');
ylabel('y');
legend('sin(x)', 'cos(x)');
title('三角函数图像');
grid on;

% 子图
subplot(2,1,1); plot(x, y1);
subplot(2,1,2); plot(x, y2);
```

---

## 八、实用技巧

| 技巧 | 说明 |
|------|------|
| **查看变量** | 工作区窗口 或 `whos` 命令 |
| **保存结果** | `save('mydata.mat', 'x', 'y')` |
| **加载数据** | `load('mydata.mat')` |
| **避免循环** | 尽量用向量化运算（如 `x.^2` 代替 `for`） |
| **调试** | 在行号左侧点击设断点，按 F5 运行到断点 |

---

> 💡 **黄金法则**：  
>
> - **向量化 > 循环**  
> - **`A\b` > `inv(A)*b`**  
> - **`interp1(..., 'spline')` > 高次全局多项式插值**

